(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{286:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a='# Password Authentication\r\n\r\n```tsx\r\nimport { useAuth } from "@ordercloud/react-hooks";\r\n\r\nconst ORDERCLOUD_CLIENT_ID = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx";\r\nconst ORDERCLOUD_SCOPE = ["Shopper"];\r\n\r\nconst MyLoginComponent = () => {\r\n  const { loading, error, tokenPayload, login, logout } = useAuth(\r\n    ORDERCLOUD_CLIENT_ID,\r\n    ORDERCLOUD_SCOPE\r\n  );\r\n  const username = "YOUR_USERNAME";\r\n  const password = "YOUR_PASSWORD";\r\n\r\n  const handleLogin = (e: React.MouseEvent) => {\r\n    login(username, password);\r\n  };\r\n\r\n  return loading ? (\r\n    <h1>Loading...</h1>\r\n  ) : error ? (\r\n    <pre>{error}</pre>\r\n  ) : tokenPayload ? (\r\n    <div>\r\n      <button onClick={logout}>Logout</button>\r\n      <pre>{tokenPayload}</pre>\r\n    </div>\r\n  ) : (\r\n    <button onClick={handleLogin}>Login</button>\r\n  );\r\n};\r\n```\r\n\r\n# Anonymous Authentication\r\n\r\nTo enable anonymous shopping, the OrderCloud API client must have a `DefaultContextUserName` and `IsAnonBuyer` set to `true`.\r\n\r\n```tsx\r\nimport { useAuth } from "@ordercloud/react-hooks";\r\n\r\nconst ORDERCLOUD_CLIENT_ID = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx";\r\nconst ORDERCLOUD_SCOPE = ["Shopper"];\r\n\r\nconst MyAnonymous = () => {\r\n  const { loading, tokenPayload, error } = useAuth(\r\n    ORDERCLOUD_CLIENT_ID,\r\n    ORDERCLOUD_SCOPE,\r\n    true\r\n  );\r\n  return loading ? (\r\n    <h1>Loading...</h1>\r\n  ) : error ? (\r\n    <pre>{error}</pre>\r\n  ) : (\r\n    <pre>{tokenPayload}</pre>\r\n  );\r\n};\r\n```\r\n'},288:function(module,__webpack_exports__,__webpack_require__){"use strict";var react=__webpack_require__(10),index_esm=__webpack_require__(62),lib=__webpack_require__(287),lib_default=__webpack_require__.n(lib),parse=function(token){if(token)return lib_default()(token)};__webpack_exports__.a=function(clientId,scope,anonymous){var _a=Object(react.useState)(),error=_a[0],setError=_a[1],_b=Object(react.useState)(!1),loading=_b[0],setLoading=_b[1],_c=Object(react.useState)(parse(index_esm.b.GetAccessToken())),decoded=_c[0],setDecoded=_c[1];Object(react.useEffect)((function(){var unmounted=!1;return setError(void 0),function(token,clientId,anonymous,expBufferInSeconds){if(!token)return!1;var parsedToken="string"==typeof token?parse(token):token;return(!clientId||parsedToken.cid===clientId.toLowerCase())&&(!(anonymous&&!parsedToken.orderid)&&parsedToken.exp>(new Date).getTime()/1e3+(expBufferInSeconds||0))}(decoded,clientId,anonymous,30)||(index_esm.b.RemoveAccessToken(),anonymous?(setLoading(!0),index_esm.a.Anonymous(clientId,scope).then((function(auth){unmounted||(setDecoded(parse(auth.access_token)),index_esm.b.SetAccessToken(auth.access_token),setLoading(!1))})).catch((function(ex){unmounted?console.warn(ex):(setError(ex.response.data),setLoading(!1))}))):decoded&&setDecoded(void 0)),function(){unmounted=!0}}),[clientId,scope,decoded,anonymous]);var handleLogin=Object(react.useCallback)((function(username,password){return username?password?void(username&&password&&(setLoading(!0),index_esm.a.Login(username,password,clientId,scope).then((function(auth){setDecoded(parse(auth.access_token)),index_esm.b.SetAccessToken(auth.access_token),setLoading(!1)})).catch((function(ex){setError(ex.response.data),setLoading(!1)})))):setError('[OC Hooks] > useAuth > handleLogin: "password" is required'):setError('[OC Hooks] > useAuth > handleLogin: "username" is required')}),[clientId,scope]),handleLogout=Object(react.useCallback)((function(){setDecoded(void 0)}),[]);return Object(react.useMemo)((function(){return{loading:loading,tokenPayload:decoded,error:error,login:handleLogin,logout:handleLogout}}),[decoded,error,handleLogin,handleLogout,loading])}},289:function(module,exports,__webpack_require__){__webpack_require__(290),__webpack_require__(436),__webpack_require__(437),module.exports=__webpack_require__(650)},354:function(module,exports){},437:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(122);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)(__webpack_require__(617),module)}.call(this,__webpack_require__(216)(module))},617:function(module,exports,__webpack_require__){var map={"./stories/useAuth.stories.tsx":618};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=617},618:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10),_storybook_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(122),_notes_useAuth_md__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(286),_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(54),_hooks_useAuth__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(288),stories=Object(_storybook_react__WEBPACK_IMPORTED_MODULE_1__.storiesOf)("Authentication",module),scope="Shopper".split(" ");stories.add("Kitchen Sink",(function(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement((function(){var anonymous=Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_3__.boolean)("anonymous",!0),_a=Object(_hooks_useAuth__WEBPACK_IMPORTED_MODULE_4__.a)(Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_3__.text)("clientid","2786113D-5DF5-475D-9428-25F9066B93E4"),Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_3__.array)("scope",scope),anonymous),loading=_a.loading,tokenPayload=_a.tokenPayload,error=_a.error,login=_a.login;return react__WEBPACK_IMPORTED_MODULE_0__.useEffect((function(){if(!anonymous){var username=Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_3__.text)("username",""),password=Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_3__.text)("password","");login(username,password)}}),[anonymous]),loading?react__WEBPACK_IMPORTED_MODULE_0__.createElement("h1",null,"Loading..."):error?react__WEBPACK_IMPORTED_MODULE_0__.createElement("pre",{style:{color:"red"}},"string"==typeof error?error:JSON.stringify(error,null,2)):react__WEBPACK_IMPORTED_MODULE_0__.createElement("pre",null,JSON.stringify(tokenPayload,null,2))}))}),{notes:_notes_useAuth_md__WEBPACK_IMPORTED_MODULE_2__.a}).addDecorator(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_3__.withKnobs)}.call(this,__webpack_require__(216)(module))}},[[289,1,2]]]);
//# sourceMappingURL=main.8bca85e9d1c84bf32bde.bundle.js.map